"use strict";const menuIcon=document.querySelector(".menu-icon"),menuBody=document.querySelector(".header__nav");menuIcon.addEventListener("click",(function(){menuIcon.classList.toggle("_active"),menuBody.classList.toggle("_active"),document.body.classList.toggle("_lock")})),new Swiper(".slider__container",{speed:600,spaceBetween:15,slidesPerGroup:1,slidesPerView:1,pagination:{el:".slider__pagination",clickable:!0},breakpoints:{320:{slidesPerView:1,slidesPerGroup:1,spaceBetween:15},635:{slidesPerView:2,slidesPerGroup:2},820:{spaceBetween:30},992:{slidesPerView:3,slidesPerGroup:3},1300:{slidesPerView:4,slidesPerGroup:4},1600:{slidesPerView:5,slidesPerGroup:5}}});let slideTimeout,selects=document.getElementsByTagName("select");function selects_init(){for(let e=0;e<selects.length;e++)select_init(selects[e]);document.addEventListener("click",(function(e){selects_close(e)})),document.addEventListener("keydown",(function(e){27==e.which&&selects_close(e)}))}function selects_close(e){const t=document.querySelectorAll(".select");if(!e.target.closest(".select"))for(let e=0;e<t.length;e++){const o=t[e],l=o.querySelector(".select__options");o.classList.remove("_active"),_slideUp(l,100)}}function select_init(e){const t=e.parentElement,o=e.getAttribute("class"),l=e.querySelector("option:checked");e.setAttribute("data-default",l.value),e.style.display="none",t.insertAdjacentHTML("beforeend",'<div class="select select_'+o+'"></div>'),e.parentElement.querySelector(".select").appendChild(e),select_item(e)}function select_item(e){const t=e.parentElement,o=t.querySelector(".select__item"),l=e.querySelectorAll("option"),s=e.querySelector("option:checked").text,n=e.getAttribute("data-type");o&&o.remove();let i="";i="input"==n?'<div class="select__value icon-select-arrow"><input autocomplete="off" type="text" name="form[]" value="'+s+'" data-error="Ошибка" data-value="'+s+'" class="select__input"></div>':'<div class="select__value icon-select-arrow"><span>'+s+"</span></div>",t.insertAdjacentHTML("beforeend",'<div class="select__item"><div class="select__title">'+i+'</div><div class="select__options">'+select_get_options(l)+"</div></div></div>"),select_actions(e,t)}function select_actions(e,t){const o=t.querySelector(".select__item"),l=t.querySelector(".select__options"),s=t.querySelectorAll(".select__option"),n=e.getAttribute("data-type"),i=t.querySelector(".select__input");o.addEventListener("click",(function(){let e=document.querySelectorAll(".select");for(let t=0;t<e.length;t++){const l=e[t],s=l.querySelector(".select__options");l!=o.closest(".select")&&(l.classList.remove("_active"),_slideUp(s,100))}_slideToggle(l,100),t.classList.toggle("_active")}));for(let o=0;o<s.length;o++){const l=s[o],r=l.getAttribute("data-value"),c=l.innerHTML;"input"==n?i.addEventListener("keyup",select_search):l.getAttribute("data-value")==e.value&&(l.style.display="none"),l.addEventListener("click",(function(){for(let e=0;e<s.length;e++)s[e].style.display="block";"input"==n?(i.value=c,e.value=r):(t.querySelector(".select__value").innerHTML="<span>"+c+"</span>",e.value=r,l.style.display="none")}))}}function select_get_options(e){if(e){let t="";for(let o=0;o<e.length;o++){const l=e[o],s=l.value;""!=s&&(t=t+'<div data-value="'+s+'" class="select__option">'+l.text+"</div>")}return t}}function select_search(e){e.target.closest(".select ").querySelector(".select__options");let t=e.target.closest(".select ").querySelectorAll(".select__option"),o=e.target.value.toUpperCase();for(let e=0;e<t.length;e++){let l=t[e];(l.textContent||l.innerText).toUpperCase().indexOf(o)>-1?l.style.display="":l.style.display="none"}}function selects_update_all(){let e=document.querySelectorAll("select");if(e)for(let t=0;t<e.length;t++)select_item(e[t])}selects.length>0&&selects_init();let slideOpen=!1,_slideToggle=(e,t)=>(window.clearTimeout(slideTimeout),slideOpen?_slideUp(e,t):_slideDown(e,t)),_slideDown=(e,t=500)=>{slideOpen=!0,e.style.removeProperty("display");let o=window.getComputedStyle(e).display;"none"===o&&(o="block"),e.style.display=o;let l=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=l+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),slideTimeout=window.setTimeout((function(){e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}),t)},_slideUp=(e,t=500)=>{slideOpen=!1,e.style.height=e.offsetHeight+"px",e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,slideTimeout=window.setTimeout((function(){e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}),t)};const popupLinks=document.querySelectorAll(".popup-link"),body=document.querySelector("body"),lockPadding=document.querySelectorAll(".lock-padding");let unlock=!0;const timeout=800;if(popupLinks.length>0)for(let e=0;e<popupLinks.length;e++){const t=popupLinks[e];t.addEventListener("click",(function(e){const o=t.getAttribute("href").replace("#","");popupOpen(document.getElementById(o)),e.preventDefault()}))}const popupCloseIcon=document.querySelectorAll(".close-popup");if(popupCloseIcon.length>0)for(let e=0;e<popupCloseIcon.length;e++){const t=popupCloseIcon[e];t.addEventListener("click",(function(e){popupClose(t.closest(".popup")),e.preventDefault()}))}function popupOpen(e){if(e&&unlock){const t=document.querySelector(".popup.open");t?popupClose(t,!1):bodyLock(),e.classList.add("open"),e.addEventListener("mousedown",(function(e){e.target.closest(".popup__content")||popupClose(e.target.closest(".popup"))}))}}function popupClose(e,t=!0){unlock&&(e.classList.remove("open"),t&&bodyUnLock())}function bodyLock(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";if(lockPadding.length>0)for(let t=0;t<lockPadding.length;t++){lockPadding[t].style.paddingRight=e}body.style.paddingRight=e,body.classList.add("_lock"),unlock=!1,setTimeout((function(){unlock=!0}),800)}function bodyUnLock(){setTimeout((function(){for(let e=0;e<lockPadding.length;e++){lockPadding[e].style.paddingRight="0px"}body.style.paddingRight="0px",body.classList.remove("_lock")}),800),unlock=!1,setTimeout((function(){unlock=!0}),800)}document.addEventListener("keydown",(function(e){if(27===e.which){popupClose(document.querySelector(".popup.open"))}})),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);const form=document.querySelector(".sign-in__form");function formSend(e,t){formValidate(t)>0&&e.preventDefault()}function formValidate(e){let t=0;const o=e.querySelectorAll("._req");for(let e of o)e.classList.remove("_err"),e.value?("email"===e.getAttribute("type")&&emailTest(e)&&(t++,e.classList.add("_err")),"tel"===e.getAttribute("type")&&phoneNumberTest(e)&&(t++,e.classList.add("_err"))):(t++,e.classList.add("_err"));return t}function emailTest(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}function phoneNumberTest(e){return!/^([0-9\(\)\/\+ \-]*)$/.test(e.value)}form.addEventListener("submit",(function(e){formSend(e,this)}));